---
namespace: oauth2-proxy
helm:
  repo: https://charts.bitnami.com
  chart: oauth2-proxy
  releaseName: oauth2-proxy
  version: 3.3.1

  values:
    ingress:
      enabled: true

      tls: true
      certManager: true
      hostname: protect.dev.krd

      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-cluster-issuer

    configuration:
      content: |-
        provider=oidc

        client_id=oauth2-proxy
        profile_url=https://auth.dev.krd/connect/userinfo
        oidc_issuer_url=https://auth.dev.krd

        custom_sign_in_logo=https://gov.krd/media/1099/govkrdlogobig.svg
        code_challenge_method=S256
        session_cookie_minimal=true
